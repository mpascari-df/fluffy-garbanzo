{
  "displayName": "Executive Dashboard - Platform Health & Data Lineage",
  "gridLayout": {
    "widgets": [
      {
        "title": "ðŸŽ¯ Executive Dashboard",
        "text": {
          "content": "**Platform Health** | **Data Pipeline Status** | **Business KPIs**\n\nReal-time monitoring of the MongoDB ingestion pipeline",
          "format": "MARKDOWN"
        }
      },
      {
        "title": "Total Events Processed",
        "scorecard": {
          "timeSeriesQuery": {
            "timeSeriesFilter": {
              "filter": "metric.type=\"logging.googleapis.com/user/change_stream_events\"",
              "aggregation": {
                "alignmentPeriod": "86400s",
                "perSeriesAligner": "ALIGN_DELTA"
              }
            }
          },
          "sparkChartView": {
            "sparkChartType": "SPARK_BAR"
          }
        }
      },
      {
        "title": "Data Loss Events",
        "scorecard": {
          "timeSeriesQuery": {
            "timeSeriesFilter": {
              "filter": "metric.type=\"logging.googleapis.com/user/data_loss_events\"",
              "aggregation": {
                "alignmentPeriod": "3600s",
                "perSeriesAligner": "ALIGN_DELTA"
              }
            }
          },
          "thresholds": [
            {
              "value": 1.0,
              "direction": "ABOVE",
              "color": "RED"
            }
          ]
        }
      },
      {
        "title": "Pipeline Flow - End to End",
        "xyChart": {
          "dataSets": [
            {
              "timeSeriesQuery": {
                "timeSeriesFilter": {
                  "filter": "metric.type=\"logging.googleapis.com/user/change_stream_events\"",
                  "aggregation": {
                    "alignmentPeriod": "300s",
                    "perSeriesAligner": "ALIGN_RATE"
                  }
                }
              },
              "plotType": "LINE",
              "legendTemplate": "MongoDB Ingested"
            },
            {
              "timeSeriesQuery": {
                "timeSeriesFilter": {
                  "filter": "metric.type=\"logging.googleapis.com/user/pubsub_published\"",
                  "aggregation": {
                    "alignmentPeriod": "300s",
                    "perSeriesAligner": "ALIGN_RATE"
                  }
                }
              },
              "plotType": "LINE",
              "legendTemplate": "Pub/Sub Published"
            },
            {
              "timeSeriesQuery": {
                "timeSeriesFilter": {
                  "filter": "metric.type=\"logging.googleapis.com/user/gcs_write_success\"",
                  "aggregation": {
                    "alignmentPeriod": "300s",
                    "perSeriesAligner": "ALIGN_RATE"
                  }
                }
              },
              "plotType": "LINE",
              "legendTemplate": "GCS Written"
            }
          ]
        }
      },
      {
        "title": "System Health - Error Rates",
        "xyChart": {
          "dataSets": [
            {
              "timeSeriesQuery": {
                "timeSeriesFilter": {
                  "filter": "metric.type=\"logging.googleapis.com/user/format_errors\"",
                  "aggregation": {
                    "alignmentPeriod": "300s",
                    "perSeriesAligner": "ALIGN_RATE"
                  }
                }
              },
              "plotType": "LINE",
              "legendTemplate": "Format Errors"
            },
            {
              "timeSeriesQuery": {
                "timeSeriesFilter": {
                  "filter": "metric.type=\"logging.googleapis.com/user/unexpected_errors\"",
                  "aggregation": {
                    "alignmentPeriod": "300s",
                    "perSeriesAligner": "ALIGN_RATE"
                  }
                }
              },
              "plotType": "LINE",
              "legendTemplate": "Unexpected Errors"
            },
            {
              "timeSeriesQuery": {
                "timeSeriesFilter": {
                  "filter": "metric.type=\"logging.googleapis.com/user/gcs_write_failed\"",
                  "aggregation": {
                    "alignmentPeriod": "300s",
                    "perSeriesAligner": "ALIGN_RATE"
                  }
                }
              },
              "plotType": "LINE",
              "legendTemplate": "GCS Write Failed"
            }
          ]
        }
      },
      {
        "title": "Processing Performance",
        "xyChart": {
          "dataSets": [
            {
              "timeSeriesQuery": {
                "timeSeriesFilter": {
                  "filter": "metric.type=\"logging.googleapis.com/user/slow_publishes\"",
                  "aggregation": {
                    "alignmentPeriod": "300s",
                    "perSeriesAligner": "ALIGN_RATE"
                  }
                }
              },
              "plotType": "LINE",
              "legendTemplate": "Slow Publishes"
            },
            {
              "timeSeriesQuery": {
                "timeSeriesFilter": {
                  "filter": "metric.type=\"logging.googleapis.com/user/high_latency_operations\"",
                  "aggregation": {
                    "alignmentPeriod": "300s",
                    "perSeriesAligner": "ALIGN_RATE"
                  }
                }
              },
              "plotType": "LINE",
              "legendTemplate": "High Latency Ops"
            }
          ]
        }
      },
      {
        "title": "Collection Activity",
        "xyChart": {
          "dataSets": [{
            "timeSeriesQuery": {
              "timeSeriesFilter": {
                "filter": "metric.type=\"logging.googleapis.com/user/events_by_collection\"",
                "aggregation": {
                  "alignmentPeriod": "300s",
                  "perSeriesAligner": "ALIGN_RATE"
                }
              }
            },
            "plotType": "STACKED_AREA"
          }]
        }
      },
      {
        "title": "Messages Received by Function",
        "scorecard": {
          "timeSeriesQuery": {
            "timeSeriesFilter": {
              "filter": "metric.type=\"logging.googleapis.com/user/function_messages_received\"",
              "aggregation": {
                "alignmentPeriod": "300s",
                "perSeriesAligner": "ALIGN_RATE"
              }
            }
          }
        }
      },
      {
        "title": "Executive Summary",
        "text": {
          "content": "## ðŸ“Š Key Metrics\n\n### Pipeline Status\n- Monitor data flow from MongoDB â†’ Pub/Sub â†’ GCS\n- Check for data loss events (should be zero)\n- Review error rates across all components\n\n### Performance\n- Track slow operations and high latency events\n- Monitor collection distribution\n- Review processing rates\n\n### Actions Required\n- Investigate any data loss events immediately\n- Review collections with high error rates\n- Optimize slow publishing operations",
          "format": "MARKDOWN"
        }
      }
    ]
  }
}